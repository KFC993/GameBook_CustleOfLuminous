================================================================================
Twine SugarCube 記法リファレンス
================================================================================

【基本構造】
--------------------------------------------------------------------------------
:: パッセージ名
パッセージの内容

:: Start
ゲームの開始地点


【リンク】
--------------------------------------------------------------------------------
[[表示テキスト|パッセージ名]]          通常のリンク
[[パッセージ名]]                      パッセージ名をそのまま表示
[[表示テキスト->パッセージ名]]        矢印記法
[[表示テキスト<-パッセージ名]]        逆向き矢印


【変数】
--------------------------------------------------------------------------------
<<set $変数名 = 値>>                  変数の設定
<<set $name = "太郎">>
<<set $hp = 100>>
<<set $items = ["剣", "盾"]>>

$変数名                               変数の表示
あなたの名前は $name です。


【条件分岐】
--------------------------------------------------------------------------------
<<if $変数 == 値>>
  条件が真の時の内容
<<elseif $変数 == 別の値>>
  別の条件が真の時の内容
<<else>>
  それ以外の時の内容
<</if>>

例：
<<if $hp > 50>>
  体力は十分だ。
<<elseif $hp > 20>>
  少し疲れている。
<<else>>
  危険な状態だ。
<</if>>


【繰り返し】
--------------------------------------------------------------------------------
<<for $i = 0; $i < 5; $i++>>
  $i 回目
<</for>>

<<for _item range $items>>
  _item
<</for>>



【コメント】
--------------------------------------------------------------------------------
/* コメント */                        ブロックコメント
/*
複数行の
コメント
*/

<!-- HTMLコメント -->

【空白行の削除】
--------------------------------------------------------------------------------
\
<<if $corridorVisitCount < 3>>\       コードの空白行を無くして詰める

【特殊なマクロ】
--------------------------------------------------------------------------------
<<goto "パッセージ名">>               強制移動
<<back>>                              前のパッセージに戻る
<<return>>                            元のパッセージに戻る

<<print $変数>>                       変数を出力
<<= $変数>>                           短縮形


【タイマー・遅延】
--------------------------------------------------------------------------------
<<timed 3s>>
  3秒後に表示される
<</timed>>

<<timed 2s>>
  2秒後
<<next 3s>>
  さらに3秒後
<</timed>>


【入力】
--------------------------------------------------------------------------------
<<textbox "$変数名" "初期値">>        テキスト入力
<<textbox "$name" "名前を入力">>

<<numberbox "$変数名" 初期値>>        数値入力
<<numberbox "$age" 20>>

<<radiobutton "$変数名" 値>>          ラジオボタン
<<checkbox "$変数名" 値 値>>          チェックボックス


【ボタン・リンク】
--------------------------------------------------------------------------------
<<button "ボタン名" "パッセージ名">>  ボタン
<<button "次へ" "NextPassage">>

<<link "リンク名" "パッセージ名">><</link>>
<<link "リンク名">>
  <<set $変数 = 値>>
  <<goto "パッセージ名">>
<</link>>


【画像・音声】
--------------------------------------------------------------------------------
[img[ファイルパス]]                   画像の表示
[img[images/picture.jpg]]

<<audio "ファイル名" play>>           音声再生
<<audio "bgm" loop play>>             ループ再生
<<audio "bgm" stop>>                  停止

【スクリプト】
--------------------------------------------------------------------------------
<<script>>
  JavaScript コード
<</script>>

<<run JavaScriptコード>>              1行のJS実行


【スタイル】
--------------------------------------------------------------------------------
@@.クラス名;
内容
@@

@@#ID名;
内容
@@

@@color:red;
赤い文字
@@


【インベントリ・配列操作】
--------------------------------------------------------------------------------
<<set $items.push("アイテム名")>>     配列に追加
<<set $items.delete("アイテム名")>>   配列から削除
<<if $items.includes("アイテム名")>>  配列に含まれるか確認


【スイッチ文】
--------------------------------------------------------------------------------
<<switch $変数>>
  <<case 値1>>
    処理1
  <<case 値2>>
    処理2
  <<default>>
    デフォルト処理
<</switch>>


【よく使うパターン】
--------------------------------------------------------------------------------
■ 選択肢
<<link "選択肢A">>
  <<set $choice = "A">>
  <<goto "Result">>
<</link>>

<<link "選択肢B">>
  <<set $choice = "B">>
  <<goto "Result">>
<</link>>

■ アイテム取得
<<link "剣を拾う">>
  <<set $items.push("剣")>>
  <<replace "#message">>剣を手に入れた！<</replace>>
<</link>>
<span id="message"></span>

■ ステータス表示
体力: $hp / $maxHp
所持金: $gold G

■ 条件付きリンク
<<if $key is true>>
  [[扉を開ける|NextRoom]]
<<else>>
  扉は鍵がかかっている
<</if>>


【特殊変数】
--------------------------------------------------------------------------------
$args                                 パッセージに渡された引数
visited()                             訪問回数を返す
tags()                                タグを返す
passage()                             現在のパッセージ名


【デバッグ】
--------------------------------------------------------------------------------
<<print $変数>>                       変数の内容を確認
console.log($変数)                    コンソールに出力


================================================================================